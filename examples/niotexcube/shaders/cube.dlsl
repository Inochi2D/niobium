import dlsl.stdlib;

struct VertexIn {
    @attribute(0) vec3 position;
    @attribute(1) vec3 color;
}

struct UniformIn {
    mat4 mvp;
}

struct VertexOut {
    @position vec4 position;
    vec3 color;
}

@vertex VertexOut vertex_main(@stageIn VertexIn in_, @buffer(0) UniformIn uniformIn) {
    return VertexOut(
        position: uniformIn.mvp * vec4(in_.position, 1.0),
        color: in_.color
    );
}

@fragment vec4 fragment_main(VertexOut in_) {
    return vec4(in_.color, 1.0);
}